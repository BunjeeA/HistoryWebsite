<!DOCTYPE html>
<html lang="en">
<head>
  <title>Histourism</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Set the size of the div element that contains the map */
   #map {
     height: 400px;  /* The height is 400 pixels */
     width: 100%;  /* The width is the width of the web page */
    }
 </style>
</head>
<body>

<div class="navbar">
  <a href="#home">Home</a>
  <a href="#travel">Travel</a> 
</div>

  <h3>Histourism</h3>
  <input id = 'searchBar' type = "text" placeholder="Enter a Country">
  <button type="submit" id = 'submitbutton'>Submit</button>

    <!--The div element for the map -->
    <div id="map"></div>
    <script>
// This example displays a marker at the center of Australia.
// When the user clicks the marker, an info window opens.
let countryGeo = {
  lat: 0,
  lng: 0
}
let countrypick = 'united&states'
let dombutton = document.getElementById('submitbutton');
let querytext = document.getElementById('searchBar');
let mapDom = document.getElementById('map');

dombutton.addEventListener('click',changeCountry);
mapDom.addEventListener('',onLoadEvent);

function onLoadEvent(){
  querytext.value = 'united&states';
  dombutton.click();
  changeCountry();
}

function changeCountry(){
  event.preventDefault();
  let userInput = querytext.value;
  let userFormatted = userInput.replace(' ','&');
  countrypick = userInput;
  querytext.value = ' ';
  changeCo();
}

//CODE TO SPLICE IN AMPERSNAD BETWEEN SPACES
//IF TIME ALLOWS GET INITIAL MAP

//write some code an if statement that figures out which country you selected
function changeCo(){
let u1 = 'https://maps.googleapis.com/maps/api/geocode/json?address=';
let u2 = '&key=AIzaSyDhc9YqFJoeBW9hOaR85spelpLA6_ji_XU';
console.log(countrypick);
let url = u1.concat(countrypick,u2);
console.log(url);

fetch(url)
  .then(function(response){
      return response.json();
  }).then(function(myJson){
      console.log(myJson);
    console.log(myJson.results[0].geometry.location);
    let countryCoord = myJson.results[0].geometry.location;
    countryGeo.lat = countryCoord.lat;
    countryGeo.lng = countryCoord.lng;
  console.log(countryGeo);
    initMap(countryGeo.lat, countryGeo.lng);
  });

}
console.log(countryGeo);
console.log(countryGeo.lat);

 function initMap(lat, lng) {
  console.log("Lat: ", lat)
  var uluru = {lat: lat, lng: lng};
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: uluru
  });

  
  var contentString = '<div id="content">'+
      '<div id="siteNotice">'+
      '</div>'+
      '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
      '<div id="bodyContent">'+
      '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
      'sandstone rock formation in the southern part of the '+
      'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
      'south west of the nearest large town, Alice Springs; 450&#160;km '+
      '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
      'features of the Uluru - Kata Tjuta National Park. Uluru is '+
      'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
      'Aboriginal people of the area. It has many springs, waterholes, '+
      'rock caves and ancient paintings. Uluru is listed as a World '+
      'Heritage Site.</p>'+
      '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
      'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
      '(last visited June 22, 2009).</p>'+
      '</div>'+
      '</div>';

  var infowindow = new google.maps.InfoWindow({
    content: contentString
  });

  var marker = new google.maps.Marker({
    position: uluru,
    map: map,
    title: 'Uluru (Ayers Rock)'
  });
  marker.addListener('click', function() {
    infowindow.open(map, marker);
  });
  marker.addListener('dblclick', function(){
    infowindow.close(map,marker);
  });
}
    </script>
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->
    <script defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhc9YqFJoeBW9hOaR85spelpLA6_ji_XU&callback=onLoadEvent">
    </script>

  <div class="container">
    <div id="nameContainer">
      Your Name Here
    </div>
  </div>

  <!-- Animejs Lib -->
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>

  <!-- Your custom scripts -->
  <script src="main.js" defer></script>
</body>
</html>